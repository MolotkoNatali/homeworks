# Instructions

- Following Playwright test failed.
- Explain why, be concise, respect Playwright best practices.
- Provide a snippet of code with the fix, if possible.

# Test info

- Name: Rozetka Website Tests >> Case 1: Search for "iPhone" and verify list of items
- Location: C:\Users\user\Desktop\sources\Homework\homework_playwright_compon_19\e2e\rozetka.spec.ts:27:9

# Error details

```
Error: page.goto: Target page, context or browser has been closed
Call log:
  - navigating to "https://rozetka.com.ua/", waiting until "load"

    at HomePage.goTo (C:\Users\user\Desktop\sources\Homework\homework_playwright_compon_19\src\pages\home-page.ts:27:25)
    at C:\Users\user\Desktop\sources\Homework\homework_playwright_compon_19\e2e\rozetka.spec.ts:19:24
```

# Test source

```ts
   1 | import { Page, Locator } from '@playwright/test';
   2 | import { RozetkaSearchElements } from 'src/elements/rozetka-search-elements';
   3 | import { RozetkaCategoryElements } from 'src/elements/rozetka-category-elements';
   4 | import { RozetkaCartElements } from 'src/elements/rozetka-cart-elements';
   5 | import { waitForElement } from 'src/helpers/expect';
   6 |
   7 | export class HomePage {
   8 |     private searchElements: RozetkaSearchElements;
   9 |     private categoryElements: RozetkaCategoryElements;
  10 |     private cartElements: RozetkaCartElements;
  11 |
  12 |     public constructor(private readonly page: Page) {
  13 |         this.searchElements = new RozetkaSearchElements(page);
  14 |         this.categoryElements = new RozetkaCategoryElements(page);
  15 |         this.cartElements = new RozetkaCartElements(page);
  16 |     }
  17 |
  18 |     private get searchInput(): Locator {
  19 |         return this.searchElements.searchInput;
  20 |     }
  21 |
  22 |     private get cartBadge(): Locator {
  23 |         return this.cartElements.cartBadge;
  24 |     }
  25 |
  26 |     public async goTo(): Promise<void> {
> 27 |         await this.page.goto('https://rozetka.com.ua/');
     |                         ^ Error: page.goto: Target page, context or browser has been closed
  28 |         await waitForElement(this.searchInput);
  29 |         await waitForElement(this.page.locator('header'));
  30 |     }
  31 |
  32 |     public async searchProduct(query: string): Promise<void> {
  33 |         await this.searchElements.searchProduct(query);
  34 |     }
  35 |
  36 |     public async goToFirstCategory(): Promise<void> {
  37 |         await this.categoryElements.goToFirstCategory();
  38 |     }
  39 |
  40 |     public async addFirstProductToCart(): Promise<void> {
  41 |         const product = this.page.locator('rz-product-tile').first();
  42 |         const addToCartButton = product.locator('button.buy-button');
  43 |         await waitForElement(addToCartButton);
  44 |         await addToCartButton.click();
  45 |     }
  46 |
  47 |     public async waitForCartUpdate(): Promise<void> {
  48 |         await this.cartElements.waitForCartUpdate();
  49 |     }
  50 |
  51 |     public async isCartBadgeVisible(): Promise<boolean> {
  52 |         await this.cartBadge.waitFor({ state: 'visible', timeout: 15000 });
  53 |         return await this.cartBadge.isVisible();
  54 |     }
  55 | }
  56 |
```